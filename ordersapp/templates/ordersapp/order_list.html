{% extends "products/base.html" %}
{% load static %}

{% block css %}
    <link href="{% static "css/profile.css" %}" rel="stylesheet">
{% endblock css %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-lg-7" style="padding-top: 56px;">

                {% if messages or form.errors %}
                    <div class="alert {% if messages %} alert-success {% else %} alert-warning {% endif %} alert-dismissible fade show" role="alert"
                            style="margin-top: 50px;">
                        {% if messages %}
                            {% for message in messages %}
                                {{ message }}
                            {% endfor %}
                        {% else %}
                            {% for error in form.errors.values %}
                                {{ error }}
                            {% endfor %}
                        {% endif %}
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                {% endif %}

                <h4 class="mt-3 mb-3">Заказы</h4>
                <div class="container row px-5">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">Id</th>
                            <th scope="col">Создан</th>
                            <th scope="col">Обновлен</th>
                            <th scope="col">Статус</th>
                        </tr>
                        </thead>
                        {% for item in object_list %}
                            {% if item.is_active %}
                            <tr>
                                <td class="td1 orders_list">{{ item.pk }}</td>
                                <td>{{ item.created|date:"Y-m-d H:i:s" }}</td>
                                <td>{{ item.updated|date:"Y-m-d H:i:s" }}</td>
                                <td>{{ item.get_status_display }}</td>
                                <td>
                                    <a href="{% url 'ordersapp:order_read' item.pk %}">
                                        посмотреть
                                    </a>
                                </td>
                                <td>
                                    {% if item.status == 'FM' %}
                                        <a href="{% url 'ordersapp:order_update' item.pk %}">
                                        редактировать
                                        </a>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if item.status == 'FM' %}
                                        <a href="{% url 'ordersapp:order_delete' item.pk %}">
                                            удалить
                                        </a>
                                    {% endif %}
                                </td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                    </table>

                    <button class="btn btn-default btn-round">
                        <a href="{% url 'index' %}">
                            на главную
                        </a>
                    </button>
                    <button class="btn btn-default btn-round">
                        <a href="{% url 'ordersapp:order_create' %}">
                            новый
                        </a>
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}